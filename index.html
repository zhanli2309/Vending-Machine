<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ricky's Ëá™ÂãïË≤©Ë≥£Ê©ü</title>
  <style>
    body {
      /* Neutral dark background */
      background: linear-gradient(180deg, #333 0%, #111 100%);
      font-family: Arial, Helvetica, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column; 
      height: 100vh;
      margin: 0;
      color: #fff;
    }

    /* VENDING MACHINE TITLE */
    .machine-title {
      font-family: Arial, sans-serif;
      font-size: 32px;
      color: #fff; 
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
      margin-bottom: 20px;
      letter-spacing: 2px;
    }

    .machine-container {
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }

    /* MAIN MACHINE BODY (Adjusted height) */
    .vending-machine {
      width: 380px;
      height: 650px; /* Kept height same for visual consistency */
      /* Realistic metallic dark grey */
      background: linear-gradient(180deg, #4d4d4d, #333333);
      border-radius: 15px;
      /* Subtle 3D shadow */
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.8), inset 0 3px 5px rgba(255, 255, 255, 0.2);
      position: relative;
      overflow: hidden;
      border: 5px solid #222; 
      padding-bottom: 5px; /* Added some padding to compensate for removed screen space */
    }

    .glass-window {
      width: 80%;
      height: 80%; /* Increased height to fill space left by the screen */
      /* Darkened, reflective glass effect */
      background: rgba(0, 0, 0, 0.6); 
      border: 4px inset #444; 
      border-radius: 10px;
      margin: 30px auto 15px;
      display: grid;
      grid-template-columns: repeat(3, 1fr); 
      grid-gap: 10px;
      padding: 10px;
      /* Reflection highlight */
      box-shadow: inset 0 0 20px rgba(0,0,0,0.8), 0 0 0 2px #111, inset 0 0 0 1px #888; 
    }

    .item {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      text-align: center;
      padding: 8px;
      transition: 0.2s;
      border: 1px solid #333;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
    }

    .item:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: scale(1.03);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
    }

    .item span {
      display: block;
      margin-top: 5px;
      font-size: 13px;
      color: #ccc;
    }

    .price {
      font-size: 12px;
      color: #ffda63; /* Yellow price tag */
    }

    .code {
      font-size: 11px;
      color: #90caf9; /* Light blue code */
      font-weight: bold;
    }

    /* SCREEN (Relocated to side panel, kept style similar to original) */
    .screen {
      background: #001f3f; /* Deep blue background */
      color: #90caf9; /* Light blue text */
      width: 95%; /* Adjusted width for side panel */
      margin: 10px auto 15px; /* Added margins to separate it from surrounding elements */
      border-radius: 6px;
      padding: 8px;
      text-align: center;
      font-family: 'Courier New', monospace;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.8), 0 0 5px #90caf9; /* Subtle blue glow */
      height: 55px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      border: 1px solid #444; 
    }

    .slot {
      width: 60%;
      height: 40px;
      background: #1c1c1c; 
      margin: 15px auto 10px;
      border-radius: 8px;
      border: 2px solid #555;
      text-align: center;
      padding-top: 10px;
      font-size: 12px;
      color: #aaa;
      box-shadow: inset 0 0 10px rgba(0,0,0,1);
    }

    .return-slot {
      width: 40%;
      height: 18px;
      background: #252525;
      border: 1px solid #555;
      margin: 5px auto 20px;
      border-radius: 4px;
      color: #999;
      text-align: center;
      font-size: 11px;
      line-height: 18px;
      box-shadow: inset 0 0 3px rgba(0,0,0,0.8);
      cursor: pointer;
    }

    /* SIDE PANEL (Control Panel) */
    .side-panel {
      width: 170px;
      height: 650px;
      /* Slightly lighter metallic grey */
      background: linear-gradient(180deg, #666, #444);
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.7), inset 0 0 10px rgba(255,255,255,0.1);
      padding: 15px 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start; /* Aligned to the top for new element order */
      border: 3px solid #333;
    }

    .coin-slot {
      width: 60px;
      height: 8px;
      background: linear-gradient(180deg, #888, #444);
      border-radius: 4px;
      box-shadow: inset 0 2px 3px rgba(0,0,0,0.8);
      margin-top: 10px;
    }
    .coin-slot.over {
      outline: 2px solid #90caf9;
      box-shadow: 0 0 8px rgba(144,202,249,0.6), inset 0 2px 3px rgba(0,0,0,0.8);
      background: linear-gradient(180deg, #a9d3ff, #5f9fe6);
    }

    .coin-label {
      text-align: center;
      font-size: 12px;
      color: #ccc;
      margin-top: 6px;
      text-shadow: none;
    }

    .coin-display {
      background: #000;
      color: #ffda63; /* Yellow-orange currency color */
      font-family: 'Courier New', monospace;
      font-size: 13px;
      text-align: center;
      border: 1px solid #666;
      border-radius: 4px;
      width: 90px;
      padding: 4px;
      margin-top: 10px; 
      margin-bottom: 0; /* Removed bottom margin */
      box-shadow: inset 0 0 8px rgba(0,0,0,0.9);
    }

    .coin-buttons {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      margin-top: 15px; 
      margin-bottom: 25px; /* Added spacing above keypad */
    }

    .coin-btn {
      background: radial-gradient(circle at top, #aaa, #777); /* Silver coin buttons */
      border: 1px solid #444;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      color: #333;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.6);
      transition: 0.1s;
      font-size: 12px;
    }

    .coin-btn:hover {
      transform: scale(1.05);
      background: radial-gradient(circle at top, #bbb, #888);
      box-shadow: 0 3px 6px rgba(0,0,0,0.8);
    }

    .keypad {
      display: grid;
      grid-template-columns: repeat(3, 45px);
      grid-gap: 8px;
      margin-top: 10px;
    }

    .key-btn {
      width: 45px;
      height: 45px;
      border-radius: 5px;
      background: #252525; /* Dark control panel buttons */
      color: #fff;
      font-size: 16px;
      border: 1px solid #444;
      cursor: pointer;
      transition: 0.1s;
      box-shadow: inset 0 2px 3px rgba(255,255,255,0.1), 0 2px 2px rgba(0,0,0,0.8);
    }

    .key-btn:hover {
      background: #3a3a3a;
      box-shadow: inset 0 2px 3px rgba(255,255,255,0.2), 0 3px 3px rgba(0,0,0,1);
    }

    .coin-return-btn { 
      background: #3d3d3d;
      width: 70px;
      height: 25px;
      border: 2px outset #555;
      border-radius: 5px;
      text-align: center;
      color: #ddd;
      font-size: 11px;
      line-height: 22px;
      margin-top: auto; /* Pushes the return button to the very bottom */
      margin-bottom: 10px;
      box-shadow: inset 0 0 3px rgba(0,0,0,0.8);
      cursor: pointer;
    }
  </style>
</head>
<body>
  
  <h1 class="machine-title">RICKY'S VENDING MACHINE</h1>

  <div class="machine-container">
    <div class="vending-machine">
      <div class="glass-window">
        <div class="item">üç´<span>Â∑ßÂÖãÂäõ</span><span class="price">NT$35</span><span class="code">11</span></div>
        <div class="item">ü•î<span>Ê¥ãËäãÁâá</span><span class="price">NT$40</span><span class="code">12</span></div>
        <div class="item">ü•§<span>ÂèØÊ®Ç</span><span class="price">NT$45</span><span class="code">13</span></div>
        
        <div class="item">üíß<span>Á§¶Ê≥âÊ∞¥</span><span class="price">NT$25</span><span class="code">21</span></div>
        <div class="item">üßÅ<span>ÊùØÂ≠êËõãÁ≥ï</span><span class="price">NT$50</span><span class="code">22</span></div>
        <div class="item">üç¨<span>Á≥ñÊûú</span><span class="price">NT$20</span><span class="code">23</span></div>

        <div class="item">üçé<span>ËòãÊûúÊ±Å</span><span class="price">NT$30</span><span class="code">31</span></div>
        <div class="item">üç™<span>È§Ö‰πæ</span><span class="price">NT$35</span><span class="code">32</span></div>
        <div class="item">üçµ<span>Á∂†Ëå∂</span><span class="price">NT$40</span><span class="code">33</span></div>
        
      </div>
      
      <div class="slot">‚¨á ÂïÜÂìÅÂá∫Ë≤®Âè£ Product Tray</div>
      <div class="return-slot" onclick="returnCoins()" style="cursor: pointer;">ÈÄÄÂπ£Âè£ Coin Return</div>
    </div>

    <div class="side-panel">
      <div style="display:flex;flex-direction:column;align-items:center;">
        <div class="coin-slot"></div>
        <div class="coin-label">ÊäïÂÖ•Á°¨Âπ£Âè£<br>Coin Slot</div>
        <div class="coin-display" id="coinDisplay">NT$0</div>
      </div>

      <div class="screen" id="screen">
        Ë´ãÊäïÂÖ•Á°¨Âπ£<br>ÊàñËº∏ÂÖ•‰ª£Á¢º
      </div>

      <div class="coin-buttons">
        <button class="coin-btn" onclick="insertCoin(20)">NT$20</button> 
        <button class="coin-btn" onclick="insertCoin(10)">NT$10</button>
        <button class="coin-btn" onclick="insertCoin(50)">NT$50</button>
        <button class="coin-btn" onclick="insertCoin(100)">NT$100</button>
      </div>

      <div class="keypad">
        <button class="key-btn" onclick="pressNumber(1)">1</button>
        <button class="key-btn" onclick="pressNumber(2)">2</button>
        <button class="key-btn" onclick="pressNumber(3)">3</button>
        <button class="key-btn" onclick="pressNumber(4)">4</button>
        <button class="key-btn" onclick="pressNumber(5)">5</button>
        <button class="key-btn" onclick="pressNumber(6)">6</button>
        <button class="key-btn" onclick="pressNumber(7)">7</button>
        <button class="key-btn" onclick="pressNumber(8)">8</button>
        <button class="key-btn" onclick="pressNumber(9)">9</button>
        <button class="key-btn" onclick="clearInput()">C</button>
        <button class="key-btn" onclick="pressNumber(0)">0</button>
        <button class="key-btn" onclick="buyItem()">OK</button>
      </div>

      <div class="coin-return-btn" onclick="returnCoins()" style="cursor: pointer;">ÈÄÄÂπ£Èàï</div>
    </div>
  </div>

  <script>
    let balance = 0;
    let inputCode = "";

    const screen = document.getElementById("screen");
    const coinDisplay = document.getElementById("coinDisplay");

    const items = {
      // code: price, name
      '11': { price: 35, name: 'Â∑ßÂÖãÂäõ' },
      '12': { price: 40, name: 'Ê¥ãËäãÁâá' },
      '13': { price: 45, name: 'ÂèØÊ®Ç' },
      '21': { price: 25, name: 'Á§¶Ê≥âÊ∞¥' },
      '22': { price: 50, name: 'ÊùØÂ≠êËõãÁ≥ï' },
      '23': { price: 20, name: 'Á≥ñÊûú' },
      '31': { price: 30, name: 'ËòãÊûúÊ±Å' },
      '32': { price: 35, name: 'È§Ö‰πæ' },
      '33': { price: 40, name: 'Á∂†Ëå∂' }
    };

    function updateDisplay() {
      coinDisplay.textContent = `NT$${balance}`;
      if (inputCode.length > 0) {
        screen.innerHTML = `‰ª£Á¢º: ${inputCode}<br>NT$${balance} Â∑≤ÊäïÂÖ•`;
      } else if (balance > 0) {
        screen.innerHTML = `Â∑≤ÊäïÂÖ• NT$${balance}<br>Ë´ãËº∏ÂÖ•‰ª£Á¢º`;
      } else {
        screen.innerHTML = `Ë´ãÊäïÂÖ•Á°¨Âπ£<br>ÊàñËº∏ÂÖ•‰ª£Á¢º`;
      }
    }

    function insertCoin(amount) {
      balance += amount;
      updateDisplay();
    }

    function pressNumber(num) {
      if (inputCode.length < 2) {
        inputCode += num;
        updateDisplay();
      }
    }

    function clearInput() {
      inputCode = "";
      updateDisplay();
    }

    function buyItem() {
      if (!items[inputCode]) {
        screen.innerHTML = `‰ª£Á¢ºÈåØË™§<br>Ë´ãÈáçÊñ∞Ëº∏ÂÖ•`;
        inputCode = "";
        return;
      }

      const item = items[inputCode];
      const price = item.price;
      const itemName = item.name;

      if (balance >= price) {
        let change = balance - price;
        balance = 0; // Reset balance
        coinDisplay.textContent = `NT$0`;

        // Display purchase message and change
        screen.innerHTML = `Â∑≤Ë≥ºË≤∑ ${itemName} (${inputCode})<br>ÊâæÈõ∂ NT$${change}`;
        
        // Reset screen after a short delay
        setTimeout(() => {
          screen.innerHTML = `ÊÑüË¨ùÊÇ®ÁöÑË≥ºË≤∑!<br>Ë´ãÊãøÂèñÂïÜÂìÅÂèäÊâæÈõ∂`;
        }, 3000);

      } else {
        screen.innerHTML = `ÈáëÈ°ç‰∏çË∂≥<br>ÂïÜÂìÅNT$${price}`;
      }

      inputCode = "";
    }
    
    function returnCoins() {
        if (balance > 0) {
            let returnedAmount = balance;
            balance = 0;
            coinDisplay.textContent = `NT$0`;
            screen.innerHTML = `Â∑≤ÈÄÄÈÇÑ NT$${returnedAmount}<br>Ê≠°ËøéÂÜçÊ¨°‰ΩøÁî®!`;
        } else {
            screen.innerHTML = `Ê≤íÊúâÂèØÈÄÄÈÇÑÁöÑÁ°¨Âπ£`;
        }
        inputCode = "";
        setTimeout(updateDisplay, 3000); // Reset screen after a few seconds
    }

    // --- Drag & drop support: drag coin buttons into the coin slot ---
    (function setupDragDrop() {
      const coinButtons = document.querySelectorAll('.coin-btn');
      coinButtons.forEach(btn => {
        // make them draggable
        btn.setAttribute('draggable', 'true');
        btn.addEventListener('dragstart', (e) => {
          // extract numeric amount (e.g. "NT$20" -> 20)
          const txt = btn.textContent || '';
          const digits = txt.replace(/[^0-9]/g, '');
          e.dataTransfer.setData('text/plain', digits);

          // small drag image
          const dragEl = document.createElement('div');
          dragEl.textContent = txt.trim();
          dragEl.style.padding = '6px 10px';
          dragEl.style.background = '#fff';
          dragEl.style.color = '#000';
          dragEl.style.border = '1px solid #ccc';
          dragEl.style.borderRadius = '6px';
          dragEl.style.fontSize = '12px';
          dragEl.style.position = 'absolute';
          dragEl.style.top = '-9999px';
          document.body.appendChild(dragEl);
          e.dataTransfer.setDragImage(dragEl, 10, 10);
          // remove after next paint
          setTimeout(() => document.body.removeChild(dragEl), 0);
        });
      });

      const coinSlotEl = document.querySelector('.coin-slot');
      if (!coinSlotEl) return;

      coinSlotEl.addEventListener('dragover', (e) => {
        e.preventDefault(); // allow drop
        coinSlotEl.classList.add('over');
      });

      coinSlotEl.addEventListener('dragleave', () => {
        coinSlotEl.classList.remove('over');
      });

      coinSlotEl.addEventListener('drop', (e) => {
        e.preventDefault();
        coinSlotEl.classList.remove('over');
        const data = e.dataTransfer.getData('text/plain');
        const amount = parseInt(data, 10);
        if (!isNaN(amount) && amount > 0) {
          insertCoin(amount);
        }
      });
    })();
  </script>
  <footer class="site-footer">¬© 2025 ÂÆâË©πÁ´ã</footer>
</body>
</html>
